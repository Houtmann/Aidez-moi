{% extends "base.html" %}
{% load i18n %}
{% block content %}
    <div class="ui two column centered grid">
    <div class="column">

<fieldset>
    <div class="ui  button"><a href="{% url "ticket.views.tickets.ticket_edit" tickets.id %}">
        {% trans "Editer le ticket" %}</a></div>

    {% if request.user.is_staff %}
        <div class="ui  button"><a href="{% url "ticket.views.tickets.delete_ticket" tickets.id %}">
            {% trans "Supprimez le ticket" %}</a></div>

        {% if tickets.incomplete == 0 %}
            <div class="ui  button"><a href="{% url "ticket.views.tickets.set_complete" tickets.id %}">
            {% trans "Marquer comme complet" %}</a></div>
        {% else %}
            <div class="ui  button"><a href="{% url "ticket.views.tickets.set_incomplete" tickets.id %}">
                {% trans "Marquer comme incomplet" %}</a></div>
        {% endif %}
    {% else %}
    <a class="uk-button" href="{% url "ticket.views.tickets.delete_ticket" tickets.id %}"
       onclick="return confirm('Etes vous sure de vouloir supprimez ce ticket ?');">
        {% trans "Demande de suppression" %}</a>

    {% endif %}


<table class="ui table">
      <thead>
        <tr>
          <th>{% trans "Titre" %} : {{ tickets.title }}</th>
          <th></th>

        </tr>
      </thead>
      <tbody>
        <tr>
          <td><span class="uk-badge">Ticket id : {{ tickets.id }}</span></td>
          <td> {% trans "Catégorie" %}:
                    {% if tickets.category == None %} {% trans "Pas de catégories" %}
                        {% else %}{{ tickets.category }}
                    {% endif %}</td>

        </tr>
        <tr class="error">
          <td>{% if tickets.status == 1 %}
                    <p>{% trans "Status" %}: <span class="uk-text-success">{{ tickets.get_status_display }}</span></p>
                {% else %}
                   {% trans "Status" %} : <span class="uk-text-warning">{{ tickets.get_status_display }}</span></p>
                {% endif %}</td>
          <td>{% trans "Urgence" %} : {{ tickets.get_priority_display }}</td>

        </tr>
        <tr>
          <td>{% trans "Demandeur" %} : {{ tickets.create_by }}</td>
          <td>{% trans "Type" %} : {{ tickets.get_types_display }}</td>

        </tr>
        <tr>
          <td>{% trans "Crée le" %} : {{ tickets.created }}</td>
          <td>{% if tickets.assign_to == None %}
                    >{% trans "Assigné à" %} : <span class="uk-text-warning">{% trans "Pas encore assigné" %}</span>
                {% else %}
                    {% trans "Assigné à" %} : {{ tickets.assign_to }}
                {% endif %}</td>
        <tr>
        <td>{% trans "Derniere edition le" %} : {{ tickets.last_edited }}</td>
            <td></td>
            </tr>


        </tr>
      </tbody>
    </table>

<div class="ui message">
      <div class="header">
        {% trans "Ticket" %} :
      </div>
      <p>{{ tickets.content }}</p>
    </div>


</div>
        <div class="ui two column centered grid">

        {% for item in follow_up %}
<div class="column">

            {% if item.follow == None %}

                {{ item.follow_by }}

                {{ item.date_follow }}
                {{ item.field }} {% trans "changé de" %} {{ item.old_value }} {% trans "à" %} {{ item.new_value }}</div>


            {% else %}
                {{ item.follow_by }}

                {{ item.date_follow }}
                {{ item.follow }}

            {% endif %}
        {% endfor %}

            <form action=""   name="post_response" method="post">{% csrf_token %}
                {{ form.follow }}
                <button class="ui submit button">{% trans "Soumettre" %}</button>
            </form></div>



    </body>
{% endblock %}