{% extends "base.html" %}

{% block content %}

<div class="uk-width-1-2 uk-container-center uk-panel-box ">
    <div class="uk-button-group">
       <button class="uk-button">Menu</button>
       <div class="" aria-expanded="false" aria-haspopup="true" data-uk-dropdown="{mode:'click'}">
           <button class="uk-button"><i class="uk-icon-caret-down"></i></button>
           <div style="" class="uk-dropdown uk-dropdown-width-2">

               <div class="uk-grid uk-dropdown-grid">

                   <div class="uk-width-1-2">
                       <ul class="uk-nav uk-nav-dropdown uk-panel">

                           <li><a href="{% url "ticket.views.tickets.ticket_edit" tickets.id %}">Editer le ticket</a></li>
                           {% if request.user.is_staff %}
                               <li><a href="#">Supprimez le ticket</a></li>
                           {% else %}
                               <li><a href="#">Demande de suppression</a></li>
                           {% endif %}

                           </li>
                       </ul></div></div></div></div></div>


<p><span class="uk-badge">Ticket id : {{ tickets.id}}</span></p>
<p><center>Titre : {{ tickets.title}}</center></p>

<table class="uk-table uk-table-hover " >
 <tr><td>Catégorie: {{ tickets.category }}</td></tr
   <tr>
       <td >{% if tickets.status == 1 %}
        <p>Status : <span class="uk-text-success">{{ tickets.get_status_display}}</span></p>
    {% else %}
        <p>Status : <span class="uk-text-warning">{{ tickets.get_status_display}}</span></p>
    {% endif %}</td>
       <td><p>Urgence : <code>{{ tickets.get_priority_display }}</code></p></td>

   </tr>
   <tr>
       <td><p>Demandeur : {{ tickets.create_by }}</p></td>

       <td><p>Type : {{ tickets.get_types_display }}</p></td>
   </tr>
 <tr>
     <td><p>Crée le : {{ tickets.created }}</p></td>
     <td>{%  if tickets.assign_to == None %}
        >Assigné à : <span class="uk-text-warning">Pas encore assigné</span>
    {% else %}
        Assigné à : {{ tickets.assign_to }}
    {% endif %}</td>
 </tr>
<tr>
    <td><p>Derniere edition le : {{ tickets.last_edited }}</p></td>
</tr>
</table>




        <hr class="uk-grid-divider">
        <p>Ticket : <p>{{ tickets.content }}</p>


</div><p></p>



<p></p>
{% for item in follow_up  %}
    {% if item.follow == None %}
    <div class="uk-width-1-2 uk-container-center uk-panel-box ">
        <article class="uk-comment uk-comment-primary">
        <header class="uk-comment-header">
        <h4 class="uk-comment-title">{{ item.follow_by}}</h4>
    <div class="uk-comment-meta">{{ item.date_follow }}</div>
        </header>
    <div class="uk-comment-body"> {{ item.field }} changé de {{ item.old_value}} à {{ item.new_value}}</div>
        </article>
    </div><p></p>
    {% else %}
    <div class="uk-width-1-2 uk-container-center uk-panel-box ">
        <article class="uk-comment uk-comment-primary">
        <header class="uk-comment-header">
        <h4 class="uk-comment-title">{{ item.follow_by }}</h4>
    <div class="uk-comment-meta">{{ item.date_follow }}</div>
        </header>
    <div class="uk-comment-body"> {{ item.follow }}</div>
        </article>
    </div>
    <p></p>
    {% endif %}

{% endfor %}

<div class="uk-width-1-2 uk-container-center uk-panel-box ">
    <form action="" name="post_response" method="post">{% csrf_token %}
        {{ form }}

<button  class="uk-button-success uk-width-1-6 uk-center  ">Soumettre</button></center></div>
    </form> <p></p>

        </div></div>
</body>
{% endblock %}